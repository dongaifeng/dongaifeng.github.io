---
title: 02-RN环境配置
urlname: agtxig
date: '2020-09-08 18:59:45 +0800'
tags: []
categories: []
---

**-------------如果你使用的是 Mac OS 系统，请参照以下步骤-----------**

###### 安装前注意：

- 在 Max OS X 系统中，homebrew 在安装软件时可能会碰到/usr/local 目录不可写的权限问题。可以使用下面的命令修复：

```
sudo chown -R `whoami` /usr/local
```

- 如果命令行提示 command not found，请加上 sudo 获得最高权限

####一、环境需求

######1） 安装 Homebrew

Homebrew 是 OS X 的套件(包)管理器，用于安装 Node.js 和一些其他必须的工具软件。

- 安装方式:

```
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
```

######2）   安装 npm 和 Node.js

Node.js 最好安装最新版本，node 安装成功后 npm 自动也就有了，直接下载安装 Node.js，网址：[https://nodejs.org/en/download/](https://nodejs.org/en/download/) ，可以以软件形式安装，或者命令行形式安装：

```
brew install node
```

######3） 安装 WatchMan

WatchMan 是由 Facebook 提供的监视文件系统变更的工具。安装此工具可以提高开发时的性能（packager 可以快速捕捉文件的变化从而实现实时刷新）。

```
brew install watchman
```

- 验证是否安装成功

![](/Users/a123/Desktop/Flutter/LearnFlutterNodes/images/img03.jpg#alt=%E9%AA%8C%E8%AF%81%E6%98%AF%E5%90%A6%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F)

####二、React Native 安装

######1）Yarn、React Native 的命令行工具（react-native-cli）

Yarn 是 Facebook 提供的替代 npm 的工具，可以加速 node 模块的下载。React Native 的命令行工具用于执行创建、初始化、更新项目、运行打包服务（packager）等任务。

######2）查看是否安装成功

![](/Users/a123/Desktop/Flutter/LearnFlutterNodes/images/img04.jpg#alt=%E5%85%A8%E5%B1%80node_moudules%E4%B8%AD%E6%9F%A5%E7%9C%8B)

####三、Xcode 安装

React Native 目前需要 Xcode 10 或更高版本。我们可以通过 App Store 或是到 Apple 开发者官网上下载。安装完 Xcode 会同时安装 Xcode IDE、Xcode 的命令行工具和 iOS 模拟器。

####四、JDK 和 Android Studio

######1） 安装最新版的 JDK

在命令行中输入`javac -version`来查看你当前安装的 JDK 版本。下载安装地址：[http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html) （资料中已经存放）

- 安装 Android studio，在安装过程中请严格执行以下选项：

1、选择 Custom 选项

![](/Users/a123/Desktop/Flutter/LearnFlutterNodes/images/img05.jpg#alt=image)

2、勾选`Performance`和`Android Virtual Device`

![](/Users/a123/Desktop/Flutter/LearnFlutterNodes/images/img06.jpg#alt=image)

3、安装完成后，在 Android Studio 的启动欢迎界面中选择 Configure | SDK Manager

![](/Users/a123/Desktop/Flutter/LearnFlutterNodes/images/img07.jpg#alt=image)

4、在`SDK Platforms`窗口中，选择`Show Package Details`，然后在`Android 9.0 (Pie)`中勾选下图所示并安装。

![](/Users/a123/Desktop/Flutter/LearnFlutterNodes/images/img08.jpg#alt=image)

![](/Users/a123/Desktop/Flutter/LearnFlutterNodes/images/img09.jpg#alt=image)

5、在`SDK Tools`窗口中，选择`Show Package Details`，然后在`Android SDK Build Tools`中勾选`Android SDK Build-Tools 28.0.3`（必须有这个版本）。

![](/Users/a123/Desktop/Flutter/LearnFlutterNodes/images/img10.jpg#alt=image)

6、ANDROID_HOME 环境变量

React Native 需要通过环境变量来了解你系统中的 Android SDK 装在什么路径，从而正常进行编译。具体的做法是把下面的命令加入到~/.bash_profile 文件中，使用  vi ~/.bash_profile。

```
# 如果你不是通过Android Studio安装的sdk，则其路径可能不同，请自行确定清楚。
export ANDROID_HOME=$HOME/Library/Android/sdk
export PATH=$PATH:$ANDROID_HOME/tools
export PATH=$PATH:$ANDROID_HOME/tools/bin
export PATH=$PATH:$ANDROID_HOME/platform-tools
export PATH=$PATH:$ANDROID_HOME/emulator
```

######2） 安装 Genymotion

Genymotion 是一个第三方模拟器，它比 Google 官方的模拟器更易设置且性能更好。但是，它只针对个人用户免费(可能需要 VPN)。

- 下载并安装 Genymotion([https://www.genymotion.com/](https://www.genymotion.com/))
- 打开 Genymotion,如果你尚未安装 VirtualBox,它有可能会提示你安装
- 创建一个模拟器并启动
- 按下 ⌘+M 可以打开开发者菜单(在安装并启动了 React Native 应用之后)

###### 3）Gradle Daemon

开启 Gradle Daemon 可以极大地提升 java 代码的增量编译速度。

**-------------如果你使用的是 Windows 系统,请参照以下步骤-----------**

####一、确保所有的命令行操作都在管理员权限下操作

####二、需要安装的插件

###### 1） Chocolatey

Chocolatey 是一个 Windows 上的包管理器，类似于 Mac 上的 watchMan。一般的安装步骤应该是下面这样, 如果国内访问失败, 请使用翻墙工具:

###### 2） Python 2

```
choco install python2
```

###### 3）Node

```
choco install nodejs.install
```

打开命令提示符窗口，使用 Chocolatey 来安装 NodeJS，或者通过软件安装。安装完 node 后建议设置 npm 镜像以加速后面的过程（或使用科学上网工具）。

```
 npm config set registry https://registry.npm.taobao.org --globalnpm
 npm config set disturl https://npm.taobao.org/dist --global
```

-------------创建并运行 React Native 项目-----------

#### 一、 React Native 的第一个应用

###### 1）执行命令,生成一个工程

```
react-native init 项目名称
```

注意:由于众所周知的网络原因，需要等待一段时间（具体视网络情况而定）。react-native 命令行从 npm 官方源拖代码时会遇上麻烦，可以将 npm 仓库源替换为国内镜像：

```
npm config set registry https://registry.npm.taobao.org
npm config set disturl https://npm.taobao.org/dist
```

###### 2）运行截图

![](/Users/a123/Desktop/Flutter/LearnFlutterNodes/images/img11.jpg#alt=image)

###### 3）运行工程文件

不管是 iOS 还是 Android，在开发调试阶段，都需要在 Mac 上启动一个 HTTP 服务，称为`Debug Server`，默认运行在`8081`端口，APP 通 `Debug Server`加载 js。

![](/Users/a123/Desktop/Flutter/LearnFlutterNodes/images/img12.jpg#alt=%E5%9B%BE1%20-%20%E5%90%AF%E5%8A%A8React%20native%20%E6%9C%8D%E5%8A%A1%E5%99%A8)

![](/Users/a123/Desktop/Flutter/LearnFlutterNodes/images/img13.jpg#alt=%E5%9B%BE2%20-%20%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%90%E8%A1%8C%E7%95%8C%E9%9D%A2)

###### 4） 把 React Native 创建的应用跑在 Android 上

- 命令行执行 cd MyRNDemo,路径切换到项目主目录
- 命令行执行 react-native run-android 进行加载运行 android 应用。
- 使用编辑器进行打开和修改 index.android.js 文件，接着通过菜单按钮选择 Reload JS 来进行刷新修改

####二、管理 React Native 库的版本

在开发中，会经常的去控制 React Native 的版本库，得以适配各种条件下的开发，那该如何查看、控制 ReactNative 的版本呢？

###### 1）查看本地的 React Native 的版本

- 命令行输入:

```
react-native --version
```

- 命令行效果:

![](/Users/a123/Desktop/Flutter/LearnFlutterNodes/images/img14.jpg#alt=image)

######2） 更新本地的 React Native 的版本

- 命令行输入:

```
npm update -g react-native-cli
```

###### 3）查询 react-native 的 npm 包最新版本

NPM 的全称是 Node Package Manager ，是一个 NodeJS 包管理和分发工具，已经成为了非官方的发布 Node 模块（包）的标准。

- npm 包地址 ：

```
 https://www.npmjs.com/package/react-native
```

- 命令行查询：

```
npm info react-native
```

- 查询效果：

![](/Users/a123/Desktop/React-Native/%E7%AC%94%E8%AE%B0/images/img15.jpg#alt=image)
